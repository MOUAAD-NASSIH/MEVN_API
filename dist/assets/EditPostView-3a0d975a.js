import{u as y,b as _,n as b,p as w,r as u,o as h,d as x,w as s,V as C,e as a,f as P,g as F,h as T,i as d,j as B,a as U,q as k,k as D,l as I,m as S}from"./index-a86eeedd.js";import{V as q,a as c,b as N,c as R}from"./VTextarea-3faa929e.js";const j={class:"d-flex justify-center mb-6 bg-surface-variant"},A={__name:"EditPostView",setup(M){const{getPostByID:m,updatePost:p}=y(),f=_(),V=b();w(()=>{(async()=>{e.value=await m(V.params.id)})()});const r=u(null),n=u([t=>t?!0:"This field is required."]),i=u(""),e=u({title:"",category:"",content:"",image:""}),v=t=>{i.value=t.target.files[0]},g=async()=>{const t=new FormData;if(t.append("image",i.value),t.append("title",e.value.title),t.append("category",e.value.category),t.append("content",e.value.content),t.append("old_image",e.value.image),r.value.validate()){const l=await p(e.value._id,t);f.push({name:"home",query:{message:l.message}})}};return(t,l)=>(h(),x(C,null,{default:s(()=>[a(S,{"no-gutters":""},{default:s(()=>[a(P,{sm:"10",class:"mx-auto"},{default:s(()=>[a(F,{class:"pa-5"},{default:s(()=>[a(T,null,{default:s(()=>[d("Update Post")]),_:1}),a(B),U("div",j,[a(k,{width:316,"aspect-ratio":"16/9",cover:"",src:"http://localhost:5000/"+e.value.image},null,8,["src"])]),a(q,{ref_key:"form",ref:r,onSubmit:D(g,["prevent"]),class:"pa-5",enctype:"multipart/form-data"},{default:s(()=>[a(c,{label:"Title","prepend-icon":"mdi-note",modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.title=o),rules:n.value},null,8,["modelValue","rules"]),a(c,{label:"Category","prepend-icon":"mdi-view-list",modelValue:e.value.category,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.category=o),rules:n.value},null,8,["modelValue","rules"]),a(N,{label:"Content","prepend-icon":"mdi-note-plus",modelValue:e.value.content,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.content=o),rules:n.value},null,8,["modelValue","rules"]),a(R,{accept:"image/*",onChange:v,"show-size":"",counter:"",label:"Select Image"}),a(I,{type:"submit",class:"mt-3",color:"success"},{default:s(()=>[d("Update Post")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{A as default};
